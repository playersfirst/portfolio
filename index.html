<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="googlebot" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="bingbot" content="noindex, nofollow">
    <meta name="yandex" content="none">
    <meta name="baidu" content="noindex, nofollow">
    <meta name="X-Robots-Tag" content="noindex, nofollow, noarchive">
    <title>Portfolio Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <!-- Main portfolio summary card -->
        <div class="portfolio-summary">
            <div class="total-value" id="main-total-value">$0.00</div>
            <div class="euro-value" id="main-euro-value">(€0.00)</div>
            
            <div class="pnl-summary">
                <div class="pnl-item">
                    <div class="pnl-label">Total P&L</div>
                    <div class="pnl-value" id="main-total-pnl">$0.00</div>
                </div>
                <div class="pnl-item">
                    <div class="pnl-label">Return</div>
                    <div class="pnl-value">
                        <span class="badge" id="main-pnl-badge">0.00%</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Portfolio details table -->
        <div class="portfolio-container">
            <div class="dashboard-card">
                <div class="loading" id="loading">Loading data...</div>
                <div class="table-container">
                    <table class="portfolio-table" id="portfolio-table">
                        <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>Shares</th>
                                <th>Current Price</th>
                                <th>Value</th>
                                <th>P&L</th>
                                <th>P&L%</th>
                                <th>24H</th>
                            </tr>
                        </thead>
                        <tbody id="portfolio-data">
                            <!-- Data will be populated by JavaScript -->
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="3">Total ($)</td>
                                <td id="total-value">$0.00</td>
                                <td id="total-pnl">$0.00</td>
                                <td>
                                    <span class="badge" id="total-%-pnl">0.00%</span>
                                </td>
                                <td></td>
                            </tr>
                            <tr class="euro-row">
                                <td colspan="3">Total (€)</td>
                                <td id="total-euros">€0.00</td>
                                <td id="euro-pnl">€0.00</td>
                                <td>
                                    <span class="badge" id="total-%-pnl-euros">0.00%</span>
                                </td>
                                <td></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
            <div class="info-bar">
                <div class="last-updated">Last updated: <span id="last-updated">-</span></div>
                <button id="currency-switch-btn" class="currency-switch">EUR</button>
            </div>
        </div>

        <!-- History chart section -->
        <div id="history-section" class="card">
            <div class="card-header">
                <div style="display: flex; align-items: center;">
                    <select id="timeframe-select" class="text-sm border border-slate-300 rounded px-2 py-1">
                        <option value="8">Last week</option>
                        <option value="15">Last 2 weeks</option>
                        <option value="31">Last month</option>
                        <option value="183">Last 6 months</option>
                        <option value="366">Last year</option>
                    </select>
                </div>
            </div>
            <div class="card-body">
                <div class="chart-container" style="position: relative; height: 300px; padding: 0;">
                    <canvas id="history-chart"></canvas>
                </div>
            </div>
        </div>

        <!-- Pie chart section -->
        <div class="chart-container" style="height: 500px; position: relative;">
            <div class="chart-header">
                <h3>ASSET ALLOCATION</h3>
                <p>Based on current market value</p>
            </div>
            <canvas id="current-pie-chart" style="width: 300px; height: 300px; display: block; margin: 0 auto;"></canvas>
            <div id="chart-legend"></div>
        </div>

        <!-- CBBI (Crypto Fear & Greed Index) section -->
        <div class="cbbi-card">
            <div class="cbbi-header">
                <h3>BTC INDEX</h3>
                <p>Current market sentiment</p>
            </div>
            <div class="cbbi-content">
                <div class="cbbi-value" id="cbbi-value">--</div>
                <div class="cbbi-date" id="cbbi-date">--</div>
            </div>
        </div>

        <!-- Historical PnL Returns section -->
        <div class="historical-pnl-card">
            <div class="historical-pnl-header">
                <h3>HISTORICAL RETURNS</h3>
            </div>
            <div class="historical-pnl-controls">
                <div class="year-selector">
                    <button class="year-arrow" id="year-prev" title="Previous Year">‹</button>
                    <div class="year-display" id="year-display">2025</div>
                    <button class="year-arrow" id="year-next" title="Next Year">›</button>
                </div>
                <div class="custom-date-picker">
                    <button class="calendar-btn" id="calendar-btn" title="Custom Date Range">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="historical-pnl-period">
                <span id="historical-period-text">Loading...</span>
            </div>
            <div class="historical-pnl-content">
                <div class="ytd-values">
                    <div class="ytd-value-item">
                        <span class="ytd-label">Total</span>
                        <span class="ytd-value" id="historical-total-return">--</span>
                    </div>
                    <div class="ytd-value-item">
                        <span class="ytd-label">Risk Assets</span>
                        <span class="ytd-value" id="historical-excl-sgov-return">--</span>
                    </div>
                </div>
                <div class="ytd-assets" id="historical-pnl-assets">
                    <!-- Individual assets will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>  
    
    <script src="script.js"></script>
<br></body>
</html>
